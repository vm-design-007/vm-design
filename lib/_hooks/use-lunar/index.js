"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const n=require("./src/index.js"),m=()=>{const R=t=>{let e,o=348;for(e=32768;e>8;e>>=1)o+=n.LUNAR_INFO[t-1900]&e?1:0;return o+I(t)},C=t=>n.LUNAR_INFO[t-1900]&15,I=t=>C(t)?n.LUNAR_INFO[t-1900]&65536?30:29:0,F=(t,e)=>e>12||e<1?-1:n.LUNAR_INFO[t-1900]&65536>>e?30:29,T=(t,e)=>{const o="\u9B54\u7FAF\u6C34\u74F6\u53CC\u9C7C\u767D\u7F8A\u91D1\u725B\u53CC\u5B50\u5DE8\u87F9\u72EE\u5B50\u5904\u5973\u5929\u79E4\u5929\u874E\u5C04\u624B\u9B54\u7FAF",r=[20,19,21,21,21,22,23,23,23,23,22,22];return o.substr(t*2-(e<r[t-1]?2:0),2)+"\u5EA7"},p=(t,e)=>{if(t<1900||t>2100||e<1||e>24)return-1;const o=n.SOLAR_TERM_LIST[t-1900],r=[];for(let s=0;s<o.length;s+=5){const a=parseInt("0x"+o.substr(s,5)).toString();r.push(a[0],a.substr(1,2),a[3],a.substr(4,2))}return parseInt(r[e-1])},b=t=>{let e;switch(t){case 10:e="\u521D\u5341";break;case 20:e="\u4E8C\u5341";break;case 30:e="\u4E09\u5341";break;default:e=n.DATE_CHANG_LUNAR_CALENDAR[Math.floor(t/10)],e+=n.CONVERT_DIGIT_CHINES[t%10]}return e},d=t=>n.ANIMALS[(t-4)%12];return(t,e,o)=>{let r=parseInt(t.toString()),s=parseInt(e.toString()),a=parseInt(o.toString());if(r<1900||r>2100||r===1900&&s===1&&a<31)return-1;let i;r?i=new Date(r,parseInt(s.toString())-1,a):i=new Date;let u,D=0,c=0;r=i.getFullYear(),s=i.getMonth()+1,a=i.getDate();let l=(Date.UTC(i.getFullYear(),i.getMonth(),i.getDate())-Date.UTC(1900,0,31))/864e5;for(u=1900;u<2101&&l>0;u++)c=R(u),l-=c;l<0&&(l+=c,u--);let E=i.getDay();E===0&&(E=7);const A=u;D=C(u);let f=!1;for(u=1;u<13&&l>0;u++)D>0&&u===D+1&&f===!1?(--u,f=!0,c=I(A)):c=F(A,u),f===!0&&u===D+1&&(f=!1),l-=c;l===0&&D>0&&u===D+1&&(f?f=!1:(f=!0,--u)),l<0&&(l+=c,--u);const L=u,_=l+1,O=p(r,s*2);let N=null;O===a&&(N=n.SOLAR_TERM[s*2-1]);const h=T(s,a),S=s+"-"+a;let g=L+"-"+_;return L===12&&_===29&&F(A,L)===29&&(g="12-30"),{festival:n.SOLAR_CALENDAR_FESTIVE[S]?n.SOLAR_CALENDAR_FESTIVE[S].title:"",lunarFestival:n.LUNAR_FESTIVE[g]?n.LUNAR_FESTIVE[g].title:"",animal:d(A),IDayCn:b(_),year:r,month:s,day:a,week:E,term:N,constellation:h}}};exports.useLunar=m;
