"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),N=require("./index3.js"),f=require("../../_tokens/emits/index.js"),V=require("../../_hooks/use-run/index.js");require("../../loading/src/index2.js");require("../../_hooks/use-message/index.js");const b=require("../../_svg/v-icon-notes/index.js"),y=require("../../_svg/v-icon-plus/index.js"),F={class:"v-up-load"},j=["onDrop","onDragover"],q=["name","disabled","accept","multiple"],D={key:0,class:"v-up-load__file-list"},L={class:"v-up-load__file-name"},S=e.defineComponent({name:"FUpLoad"}),x=e.defineComponent({...S,props:N.Props,emits:{[f.EMIT_FILES]:r=>r},setup(r,{emit:k}){const s=r,{run:u}=V.useRun(),d=e.ref(!1),t=e.ref(),i=e.ref(),p=()=>{i.value&&i.value.click()},v=n=>{t.value=n,k(f.EMIT_FILES,n),u(s.onLoad,n)},m=n=>{const{maxSize:o,maxLength:a}=e.toRefs(s);let l=[...n];return o.value&&(l=l.filter(c=>c.size<o.value)),a.value&&(l=l.splice(0,a.value)),l},g=n=>{const o=n.target.files;o&&v(m(o))},h=n=>{t.value&&t.value.splice(n,1)},C=n=>{n.preventDefault(),d.value=!0},E=n=>{d.value=!1;const o=n.dataTransfer.files;o&&v(m(o))};return(()=>{!s.onChange||e.watch(()=>s.files,()=>{u(s.onChange,t.value)},{deep:!0})})(),(n,o)=>{const a=e.resolveComponent("v-svg-icon"),l=e.resolveComponent("v-button"),c=e.resolveComponent("v-close-btn");return e.openBlock(),e.createElementBlock(e.Fragment,null,[e.createElementVNode("div",F,[n.drag?(e.openBlock(),e.createElementBlock("div",{key:0,class:"v-up-load__drag",onClick:p,onDrop:e.withModifiers(E,["prevent"]),onDragover:e.withModifiers(C,["prevent"])},[e.renderSlot(n.$slots,"default",{},()=>[e.createVNode(a,{icon:e.unref(y.default)},null,8,["icon"])])],40,j)):(e.openBlock(),e.createElementBlock("div",{key:1,class:"v-up-load__content",onClick:p},[e.renderSlot(n.$slots,"default",{},()=>[e.createVNode(l,null,{default:e.withCtx(()=>[e.createTextVNode("\u9009\u62E9\u6587\u4EF6")]),_:1})])])),e.createElementVNode("input",{ref_key:"inputEl",ref:i,type:"file",hidden:"",name:n.name,disabled:n.disabled,accept:n.accept,multiple:n.multiple,onChange:g},null,40,q)]),n.showList&&t.value&&t.value.length?(e.openBlock(),e.createElementBlock("ul",D,[(e.openBlock(!0),e.createElementBlock(e.Fragment,null,e.renderList(t.value,(B,_)=>(e.openBlock(),e.createElementBlock("li",{key:_,class:"v-up-load__file-list-item"},[e.createElementVNode("span",L,[e.createVNode(a,{icon:e.unref(b.default)},null,8,["icon"]),e.createTextVNode(" "+e.toDisplayString(B.name),1)]),n.isRemove?(e.openBlock(),e.createBlock(c,{key:0,size:14,onClick:T=>h(_)},null,8,["onClick"])):e.createCommentVNode("",!0)]))),128))])):e.createCommentVNode("",!0)],64)}}});exports.default=x;
