"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),h=require("../../svg-icon/index.js"),S=require("../../close-btn/index.js"),f=require("./index3.js"),T=require("../../_utils/index3.js"),g=require("../../_model/message/index.js"),V={key:2,class:"v-message__text"},x=e.defineComponent({name:"VMessage"}),j=e.defineComponent({...x,props:f.Props,emits:f.Emits,setup(k,{expose:B}){const t=k,u=e.ref(),m=e.ref(0),a=e.ref(!1),d=e.computed(()=>t.placement.includes("top")),y=e.computed(()=>g.massageManage.getSiblingOffset(t.placement,t.id,!d.value)),c=e.computed(()=>t.offset+y.value),_=e.computed(()=>m.value+c.value);e.onMounted(()=>{e.nextTick(()=>{m.value=u.value.getBoundingClientRect().height})});const C=e.computed(()=>{const{type:o,round:s,placement:n}=t;return["v-message",{[`v-message__${o}`]:o,[`v-message__${n}`]:n,"v-message__round":s}]}),b=e.computed(()=>{const{color:o,background:s,zIndex:n}=t,i={color:o,background:s,zIndex:n};return t.placement.includes("bottom")?i.bottom=c.value+"px":i.top=c.value+"px",i}),l=e.ref(),v=()=>{!l.value||clearTimeout(l.value)},r=()=>{v(),a.value=!1},M=()=>{g.massageManage.removeInstance(t.placement,t.id)},p=()=>{!t.duration||(l.value=setTimeout(()=>{r()},t.duration))};return e.onMounted(()=>{p(),a.value=!0}),B({visible:a,bottom:_,close:r}),(o,s)=>(e.openBlock(),e.createBlock(e.Transition,{mode:"out-in",name:"v-message-fade"+(e.unref(d)?"-top":"-bottom"),onBeforeLeave:M,onAfterLeave:s[0]||(s[0]=n=>o.$emit("destroy"))},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{ref_key:"messageRef",ref:u,class:e.normalizeClass(e.unref(C)),style:e.normalizeStyle(e.unref(b)),onMouseleave:p,onMouseenter:v},[e.isVNode(o.icon)?(e.openBlock(),e.createBlock(e.unref(h.VSvgIcon),{key:0,size:24,class:"v-message__icon"},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.icon)))]),_:1})):e.createCommentVNode("",!0),e.isVNode(o.message)?(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.message),{key:1})):(e.openBlock(),e.createElementBlock("div",V,e.toDisplayString(o.message),1)),t.close?(e.openBlock(),e.createElementBlock("div",{key:3,class:"v-message__close",onClick:r},[e.unref(T.isString)(o.closeBtn)?(e.openBlock(),e.createElementBlock(e.Fragment,{key:0},[e.createTextVNode(e.toDisplayString(o.closeBtn),1)],64)):(e.openBlock(),e.createBlock(e.unref(S.VCloseBtn),{key:1,size:16},{default:e.withCtx(()=>[(e.openBlock(),e.createBlock(e.resolveDynamicComponent(o.closeBtn)))]),_:1}))])):e.createCommentVNode("",!0)],38),[[e.vShow,a.value]])]),_:1},8,["name"]))}});exports.default=j;
