"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),u=require("./index3.js"),E=require("../../_utils/utils/index.js"),k=require("../../_hooks/use-run/index.js");require("../../loading/src/index2.js");require("../../_hooks/use-message/index.js");const S={class:"v-trigger__content"},T=e.defineComponent({name:"VTrigger"}),j=e.defineComponent({...T,props:u.Props,setup(d,{expose:g}){const r=d,{run:i}=k.useRun(),n=e.ref(!1),l=e.reactive({x:"",y:""}),v=e.computed(()=>({"--trigger-content-x":l.x,"--trigger-content-y":l.y})),p=t=>{if(r.disabled)return;const o=t.target,{left:s,top:w,height:x}=o.getBoundingClientRect(),y=s+window.scrollX,C=w+window.scrollY+x;l.x=y+"px",l.y=C+"px",console.log(window.pageXOffset),n.value=!0,i(r.onOpen,n.value),i(r.onChange,n.value)},c=()=>{n.value=!1,i(r.onClose,n.value),i(r.onChange,n.value)},m=e.computed(()=>r.trigger==="hover"?"mouseover":"click"),f=e.computed(()=>r.trigger==="hover"?"mouseleave":""),_=e.computed(()=>{const{spacing:t,enterDuration:o,leaveDuration:s}=r;return{"--trigger-spacing-size":E.sizeChange(t),"--trigger-enter-duration":o&&o+"s","--trigger-leave-duration":s&&s+"s"}}),a=t=>{t.composedPath().some(s=>s.className==="v-trigger")||(c(),document.removeEventListener("click",a))},h=()=>{document.addEventListener("click",a)};return e.provide(u.TRIGGER_CLOSE_KEY,{handelClose:()=>{n.value=!1}}),g({handelClose:c}),(t,o)=>(e.openBlock(),e.createElementBlock("div",e.mergeProps({class:"v-trigger",style:e.unref(_)},{[e.toHandlerKey(e.unref(f))]:e.withModifiers(c,["stop"])}),[e.createElementVNode("div",e.mergeProps({class:"v-trigger__trigger"},{[e.toHandlerKey(e.unref(m))]:e.withModifiers(p,["stop"])}),[e.renderSlot(t.$slots,"default")],16),(e.openBlock(),e.createBlock(e.Teleport,{to:"body"},[e.createVNode(e.Transition,{name:"v-trigger",onBeforeEnter:h},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:e.normalizeClass(["v-trigger__content-box",{"v-trigger__arrow":t.arrow}]),style:e.normalizeStyle(e.unref(v))},[e.createElementVNode("div",S,[e.renderSlot(t.$slots,"content")])],6),[[e.vShow,n.value]])]),_:3})]))],16))}});exports.default=j;
