"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const r=require("vue"),l=require("./index3.js"),_=require("../../_utils/get-children/index.js"),u=require("../../_utils/is/index.js"),x=require("../../_hooks/use-run/index.js");require("../../loading/src/index2.js");require("../../_hooks/use-message/index.js");const v=r.defineComponent({name:"VForm"}),j=r.defineComponent({...v,props:l.Props,setup(d){const o=d,c=r.useSlots(),{run:p}=x.useRun(),t=r.reactive({}),f=r.computed(()=>{if(!c.default)return[];const s=_.getChildren(c.default(),"FFormItem");return s.forEach(e=>{e.props&&e.props.name&&(t[e.props.name]=!1)}),s}),m=(s,e)=>{const i=n=>{const a=s.length+1;return!(n.required&&!s||n.max&&a>n.max||n.min&&a<n.min||n.regExp&&!n.regExp.test(s))};if(u.isArray(e)){for(const n of e)if(!i(n))return n.message||!1}else if(u.isObject(e)&&!i(e))return e.message||!1;return!0},h=()=>{f.value.forEach(e=>{if(e.props&&e.props.rules&&e.props.name&&o.model){const i=m(o.model[e.props.name],e.props.rules);t[e.props.name]=i}});const s=Object.values(t);return s.length?s.every(e=>!!e&&!u.isString(e)):!0},g=s=>{s.preventDefault();const e=o.model?h():!0;p(o.onSubmit,{ok:e,res:t,evt:s})};return r.provide(l.FORM_PROVIDE_KEY,r.reactive({...r.toRefs(o),childrenCheckResult:t})),(s,e)=>s.$slots.default?(r.openBlock(),r.createElementBlock("form",{key:0,role:"form",class:"v-form",onsubmit:g},[r.renderSlot(s.$slots,"default")])):r.createCommentVNode("",!0)}});exports.default=j;
