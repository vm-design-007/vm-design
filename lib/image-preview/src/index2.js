"use strict";Object.defineProperties(exports,{__esModule:{value:!0},[Symbol.toStringTag]:{value:"Module"}});const e=require("vue"),N=require("./index3.js"),l=require("../../button/index.js"),$=require("../../toolbar/index.js"),r=require("../../toolbar-item/index.js"),m=require("../../_utils/is/index.js"),C=require("../../_svg/v-icon-chevron-left/index.js"),B=require("../../_svg/v-icon-chevron-right/index.js"),T=require("../../_svg/v-icon-cross/index.js"),y=require("../../_svg/v-icon-layout-rows/index.js"),E=require("../../_svg/v-icon-rotate-anti-clockwise/index.js"),L=require("../../_svg/v-icon-rotate-clockwise/index.js"),S=require("../../_svg/v-icon-zoom-in/index.js"),M=require("../../_svg/v-icon-zoom-out/index.js"),z=require("../../_hooks/use-operation-img/index.js"),f=require("../../_tokens/emits/index.js"),P=require("../../_hooks/use-run/index.js");require("../../loading/src/index2.js");require("../../_hooks/use-message/index.js");const O=e.createElementVNode("div",{class:"v-image-preview__mask"},null,-1),D=["onClick"],R={class:"v-image-preview__wrapper"},A=["src"],F=e.defineComponent({name:"VImagePreview"}),Z=e.defineComponent({...F,props:N.Props,emits:{[f.EMIT_VISIBLE]:s=>m.isBoolean(s)},setup(s,{emit:g}){const o=s,{run:c}=P.useRun(),{scale:_,rotate:p,smaller:x,bigger:w,scrollZoom:a,recovery:u,rotateClockwise:h,rotateCounterClock:V}=z.useOperationImg(),i=e.ref(o.showIndex>o.imgList.length-1?0:o.showIndex),b=()=>{m.isArray(o.imgList)&&o.imgList.forEach(n=>{const t=new Image;t.src=n})},k={next:()=>{if(i.value<o.imgList.length-1){i.value++;return}i.value=0},prev:()=>{if(i.value>0){i.value--;return}i.value=o.imgList.length-1}},d=n=>{u(),c(k[n])},I={1:()=>x(),2:()=>w(),3:()=>u(),4:()=>h(),5:()=>V()},j=n=>{!n||c(I[n])},v=n=>{g(f.EMIT_VISIBLE,!1),c(o.onClose,n)};return(n,t)=>(e.openBlock(),e.createBlock(e.Teleport,{to:"body",disabled:!n.appendToBody},[e.createVNode(e.Transition,{name:"v-image-preview__transition",onBeforeEnter:b},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",{class:"v-image-preview",style:e.normalizeStyle({zIndex:n.zIndex}),onMousewheel:t[0]||(t[0]=(...q)=>e.unref(a)&&e.unref(a)(...q))},[O,e.createElementVNode("div",{class:"v-image-preview__container",onClick:e.withModifiers(v,["self"])},[e.createVNode(e.Transition,{name:"v-image-preview__wrapper-transition"},{default:e.withCtx(()=>[e.withDirectives(e.createElementVNode("div",R,[e.createElementVNode("img",{class:"v-image-preview__node",draggable:"false",src:n.imgList[i.value],style:e.normalizeStyle({transform:`scale(${e.unref(_)}) rotate(${e.unref(p)}deg)`,borderRadius:n.round})},null,12,A)],512),[[e.vShow,n.visible]])]),_:1}),n.isOption?(e.openBlock(),e.createBlock(e.unref($.VToolbar),{key:0,class:"v-image-preview__option",round:"","on-click":j},{default:e.withCtx(()=>[e.createVNode(e.unref(r.VToolbarItem),{icon:e.unref(M.default),index:1},null,8,["icon"]),e.createVNode(e.unref(r.VToolbarItem),{icon:e.unref(S.default),index:2},null,8,["icon"]),e.createVNode(e.unref(r.VToolbarItem),{icon:e.unref(y.default),index:3},null,8,["icon"]),e.createVNode(e.unref(r.VToolbarItem),{icon:e.unref(L.default),index:4},null,8,["icon"]),e.createVNode(e.unref(r.VToolbarItem),{icon:e.unref(E.default),index:5},null,8,["icon"])]),_:1})):e.createCommentVNode("",!0),n.imgList.length>1?(e.openBlock(),e.createElementBlock(e.Fragment,{key:1},[e.createVNode(e.unref(l.VButton),{class:"v-image-preview__next",circle:"","before-icon":e.unref(B.default),"on-click":()=>d("next")},null,8,["before-icon","on-click"]),e.createVNode(e.unref(l.VButton),{class:"v-image-preview__prev",circle:"","before-icon":e.unref(C.default),"on-click":()=>d("prev")},null,8,["before-icon","on-click"])],64)):e.createCommentVNode("",!0),e.createVNode(e.unref(l.VButton),{class:"v-image-preview__close",circle:"","before-icon":e.unref(T.default),"on-click":v},null,8,["before-icon"])],8,D)],36),[[e.vShow,n.visible]])]),_:1})],8,["disabled"]))}});exports.default=Z;
